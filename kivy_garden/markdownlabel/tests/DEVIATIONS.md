# Deviations

## test_advanced_compatibility.py

- Line 735: Test name is `test_unicode_errors_updates_value` but the test calls `force_rebuild()` (line 748) and verifies rebuild behavior. According to guidelines, tests that verify rebuilds should use `test_*_triggers_rebuild_*` naming pattern. The current name suggests a value update without rebuild verification, but the test actually verifies rebuild behavior.
- Line 735-755: The test `test_unicode_errors_updates_value` has a name that doesn't match its assertions. The test name uses "updates_value" pattern (for no rebuild tests) but the test calls `force_rebuild()` and verifies widgets were rebuilt with new value. This should either be renamed to `test_unicode_errors_change_triggers_rebuild` or the test should be modified to not call `force_rebuild()` if it's truly a style-only property.
- Line 786: Test name is `test_disabled_change_triggers_rebuild` but the test does NOT verify rebuild occurred. It only verifies the color value changed (lines 814-819). According to guidelines, tests with "triggers_rebuild" in the name must verify rebuild occurred using `collect_widget_ids()` and comparison or `assert_rebuild_occurred()`. The current test only checks that the color value changed, not that the widget tree was rebuilt.
- Line 786-819: The test `test_disabled_change_triggers_rebuild` claims to test rebuild behavior but doesn't verify it. The test should either be renamed to `test_disabled_change_updates_value` (if disabled is a style-only property) or should be modified to actually verify rebuild occurred by collecting widget IDs before and after the change.
- Line 822: Comment uses "Mixed finite/complex strategy" but calculates "90 finite × ~0.2 complex samples" which doesn't make sense. The calculation should be `finite_size × samples_per_value` where samples_per_value is a reasonable number like 5-10. Having "~0.2 complex samples" is not meaningful.
- Line 822: The comment calculation "90 finite × ~0.2 complex samples" is incorrect. The strategy is `simple_markdown_document(), rebuild_font_names, rebuild_font_names` where `simple_markdown_document()` is complex and `rebuild_font_names` is small finite (3 values). The correct calculation should be something like "3 finite × ~7 complex samples" to get 20 examples, not "90 finite × ~0.2 complex samples".
- Line 847: Test name is `test_font_kerning_updates_value` but the test calls `force_rebuild()` (line 861) and verifies rebuild behavior. According to guidelines, tests that verify rebuilds should use `test_*_triggers_rebuild_*` naming pattern. The current name suggests a value update without rebuild verification, but the test actually verifies rebuild behavior.
- Line 847-868: The test `test_font_kerning_updates_value` has a name that doesn't match its assertions. The test name uses "updates_value" pattern (for no rebuild tests) but the test calls `force_rebuild()` and verifies widgets were rebuilt with new value. This should either be renamed to `test_font_kerning_change_triggers_rebuild` or the test should be modified to not call `force_rebuild()` if it's truly a style-only property.
- Line 873: Test name is `test_font_blended_updates_value` but the test calls `force_rebuild()` (line 887) and verifies rebuild behavior. According to guidelines, tests that verify rebuilds should use `test_*_triggers_rebuild_*` naming pattern. The current name suggests a value update without rebuild verification, but the test actually verifies rebuild behavior.
- Line 873-894: The test `test_font_blended_updates_value` has a name that doesn't match its assertions. The test name uses "updates_value" pattern (for no rebuild tests) but the test calls `force_rebuild()` and verifies widgets were rebuilt with new value. This should either be renamed to `test_font_blended_change_triggers_rebuild` or the test should be modified to not call `force_rebuild()` if it's truly a style-only property.

## test_rebuild_scheduling.py

- Line 71: Comment says "Mixed finite/complex strategy: 15 examples (2 finite × 8 complex samples)" but the calculation 2 × 8 = 16 doesn't match the actual max_examples value of 15. According to guidelines, the comment calculation should match the actual max_examples value. The correct calculation should be "2 finite × 7.5 complex samples" which is not meaningful, or max_examples should be adjusted to 16 to match the comment.
- Line 71: The comment calculation "2 finite × 8 complex samples" is incorrect. The strategy combines st_alphanumeric_text (complex), st_font_size (complex), and st_font_name with 2 values (finite). With max_examples=15, the calculation doesn't work out evenly (15/2 = 7.5). The comment should either be adjusted to "2 finite × 7-8 complex samples" or max_examples should be adjusted to 16 for a clean calculation.

## test_shortening_and_coordinate.py

- Line 331: Test name is `test_shorten_change_updates_value` but the test calls `force_rebuild()` (line 344) and the docstring says "Changing shorten triggers widget rebuild with new value." According to guidelines, tests that verify rebuilds should use `test_*_triggers_rebuild_*` naming pattern. The current name uses "updates_value" pattern (for no rebuild tests) but the test actually calls `force_rebuild()` and verifies the new value after the rebuild. This should be renamed to `test_shorten_change_triggers_rebuild` to follow the naming convention.
- Line 331-350: The test `test_shorten_change_updates_value` has a name that doesn't match its behavior. The test name uses "updates_value" pattern (typically for style-only property tests that don't rebuild) but the test calls `force_rebuild()` and the docstring explicitly states it tests that "shorten triggers widget rebuild". The test should be renamed to `test_shorten_change_triggers_rebuild` to accurately reflect that it verifies rebuild behavior.

## test_texture_render_mode.py

- Line 239: Comment incorrectly classifies strategy as "Mixed finite/complex strategy" but the strategy combines only complex/infinite dimensions: `zone=st.tuples(...)` (4 floats), `ref_name=st.from_regex(...)` (regex-based), `touch_offset_x=st.floats(...)`, `touch_offset_y=st.floats(...)`. According to guidelines, when ALL strategies are complex/infinite, this should be "Complex strategy: 50 examples (adequate coverage)" not "Mixed finite/complex strategy".
- Line 239-240: The comment "Mixed finite/complex strategy: 50 examples (multiple finite dimensions × complex samples)" is incorrect because there are NO finite dimensions in the strategy. All four dimensions (zone, ref_name, touch_offset_x, touch_offset_y) are complex/infinite strategies.
- Line 343: Comment incorrectly classifies strategy as "Mixed finite/complex strategy" but the strategy combines only complex/infinite dimensions: `zone=st.tuples(...)` (4 floats), `ref_name=st.from_regex(...)` (regex-based), `outside_offset=st.floats(...)`. Same issue as line 239.
- Line 343-344: The comment "Mixed finite/complex strategy: 50 examples (multiple finite dimensions × complex samples)" is incorrect because there are NO finite dimensions in the strategy. All three dimensions (zone, ref_name, outside_offset) are complex/infinite strategies.
