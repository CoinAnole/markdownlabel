# Implementation Plan

- [x] 1. Implement text_size height forwarding in KivyRenderer
  - [x] 1.1 Update KivyRenderer to respect text_size[1] in Label creation
    - Modify `paragraph()`, `heading()`, `block_text()`, and `_render_table_cell()` methods
    - Change from always setting `text_size[1]` to None to using the provided value
    - Handle all four cases: both set, width only, height only, neither set
    - _Requirements: 1.1, 1.2, 1.3_
  - [x] 1.2 Write property test for text_size height forwarding
    - **Property 1: text_size Height Forwarding**
    - **Validates: Requirements 1.1, 1.2**
  - [x] 1.3 Write property test for text_size height None backward compatibility
    - **Property 2: text_size Height None Backward Compatibility**
    - **Validates: Requirements 1.3**
  - [x] 1.4 Write property test for text_size dynamic updates
    - **Property 3: text_size Dynamic Updates**
    - **Validates: Requirements 1.4**

- [x] 2. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [-] 3. Implement padding forwarding to child Labels
  - [x] 3.1 Add padding parameter to KivyRenderer
    - Add `padding` parameter to `__init__` method
    - Store padding value for use in Label creation
    - _Requirements: 2.1_
  - [x] 3.2 Forward padding to child Labels in KivyRenderer
    - Update `paragraph()`, `heading()`, `block_text()`, and `_render_table_cell()` to apply padding
    - Ensure padding is applied to Labels in nested structures (lists, tables, block quotes)
    - _Requirements: 2.1, 2.2, 2.4_
  - [x] 3.3 Update MarkdownLabel to pass padding to KivyRenderer
    - Modify `_rebuild_widgets()` to pass padding to KivyRenderer constructor
    - _Requirements: 2.1, 2.3_
  - [x] 3.4 Write property test for padding forwarding
    - **Property 4: Padding Forwarding to Child Labels**
    - **Validates: Requirements 2.1, 2.2**
  - [x] 3.5 Write property test for padding dynamic updates
    - **Property 5: Padding Dynamic Updates**
    - **Validates: Requirements 2.3**
  - [x] 3.6 Write property test for padding with nested structures
    - **Property 6: Padding with Nested Structures**
    - **Validates: Requirements 2.4**

- [ ] 4. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [ ] 5. Implement configurable auto-sizing behavior
  - [ ] 5.1 Add auto_size_height property to MarkdownLabel
    - Add BooleanProperty with default True
    - Add docstring explaining behavior
    - _Requirements: 3.1, 3.2_
  - [ ] 5.2 Modify MarkdownLabel __init__ to use auto_size_height
    - Store user's size_hint_y value before potential override
    - Apply auto-sizing only when auto_size_height is True
    - Bind auto_size_height changes to handler
    - _Requirements: 3.1, 3.2, 3.3_
  - [ ] 5.3 Implement _on_auto_size_height_changed handler
    - When True: set size_hint_y=None and bind height to minimum_height
    - When False: unbind height and restore user's size_hint_y
    - _Requirements: 3.4, 3.5_
  - [ ] 5.4 Write property test for auto_size_height True behavior
    - **Property 7: auto_size_height True Behavior**
    - **Validates: Requirements 3.1, 3.3**
  - [ ] 5.5 Write property test for auto_size_height False behavior
    - **Property 8: auto_size_height False Behavior**
    - **Validates: Requirements 3.2**
  - [ ] 5.6 Write property test for auto_size_height dynamic toggling
    - **Property 9: auto_size_height Dynamic Toggling**
    - **Validates: Requirements 3.4, 3.5**

- [ ] 6. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
